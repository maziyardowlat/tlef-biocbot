<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - BiocBot Instructor</title>
    
    <!-- Favicon - UBC Logo -->
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/images/apple-touch-icon.png">
    <link rel="manifest" href="../assets/images/site.webmanifest">
    
    <link rel="stylesheet" href="../styles/style.css">
    <link rel="stylesheet" href="../styles/home.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo-container">
                <h2>BiocBot</h2>
            </div>
            <nav class="main-nav">
                <ul>
                    <li class="active"><a href="/instructor/home" id="nav-home">Home</a></li>
                    <li><a href="/instructor/documents" id="nav-documents">Course Upload</a></li>
                    <li id="onboarding-nav-item" style="display: none;"><a href="/instructor/onboarding" id="nav-onboarding">Onboarding</a></li>
                    <li><a href="/instructor/flagged" id="nav-flagged">Flagged Content</a></li>
                    <li><a href="/instructor/student-hub" id="nav-student-hub">Student Hub</a></li>
                    <li><a href="/instructor/downloads" id="nav-downloads">Download Chats</a></li>
                    <li><a href="/instructor/ta-hub" id="nav-ta-hub">TA Hub</a></li>

                </ul>
            </nav>
            <div class="user-info">
                <div class="user-avatar">I</div>
                <div class="user-name" id="user-display-name">Instructor Name</div>
                <div class="user-role">Instructor</div>
                <div class="user-actions">
                    <a href="/instructor/settings" class="user-action">Settings</a>
                    <a href="#" id="logout-btn" class="user-action">Logout</a>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <header class="home-header">
                <div class="header-content">
                    <h1>Home</h1>
                    <!-- Course Selection Section -->
                    <div class="course-selection-container" id="course-selection-container" style="display: none;">
                        <div class="current-course-display" id="current-course-display">
                            <span class="course-label">Current Course:</span>
                            <span class="course-name-display" id="course-name-display">No course selected</span>
                            <span class="course-code-label" style="margin-left: 15px; font-weight: bold; display: none;">Code:</span>
                            <span class="course-code-display" id="course-code-display" style="font-family: monospace; background: #e9ecef; padding: 4px 8px; border-radius: 4px; font-weight: bold; color: #495057; display: none;"></span>
                            <button class="action-btn secondary" id="change-course-btn">Change Course</button>
                        </div>
                        <div class="course-selector" id="course-selector" style="display: none;">
                            <label for="course-select-dropdown">Select or Join a Course:</label>
                            <select id="course-select-dropdown" class="course-select-dropdown">
                                <option value="">Choose a course...</option>
                            </select>
                            <div id="selected-course-details" class="selected-course-details" style="display: none;">
                                <div class="course-info">
                                    <h4 id="selected-course-name"></h4>
                                    <p><strong>Course ID:</strong> <span id="selected-course-id"></span></p>
                                    <p>You will be added as an instructor to this course.</p>
                                </div>
                            </div>
                            <div class="course-selector-actions">
                                <button class="action-btn primary" id="join-course-btn" style="display: none;">Join Course</button>
                                <button class="action-btn secondary" id="cancel-course-select-btn">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <div class="home-container">
                <!-- Onboarding Prompt Section -->
                <section class="home-section onboarding-prompt-section" id="onboarding-prompt-section" style="display: none;">
                    <div class="section-header">
                        <h2>üéì Complete Your Onboarding</h2>
                    </div>
                    <div class="onboarding-prompt-content">
                        <p class="onboarding-prompt-description">
                            Welcome to BiocBot! To get started, please complete your onboarding process to set up your course and configure your learning materials.
                        </p>
                        <a href="/instructor/onboarding" class="action-btn primary" id="go-to-onboarding-btn">
                            Go to Onboarding Page ‚Üí
                        </a>
                    </div>
                </section>

                <!-- Statistics Section -->
                <section class="home-section statistics-section" id="statistics-section" style="display: none;">
                    <div class="section-header">
                        <h2>üìä Course Statistics</h2>
                    </div>
                    <div class="statistics-content">
                        <div class="statistics-grid">
                            <div class="stat-card">
                                <div class="stat-label">Total Students</div>
                                <div class="stat-value" id="stat-total-students">0</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Total Sessions</div>
                                <div class="stat-value" id="stat-total-sessions">0</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Avg. Session Length</div>
                                <div class="stat-value" id="stat-avg-session-length">0s</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Avg. Message Length</div>
                                <div class="stat-value" id="stat-avg-message-length">0</div>
                                <div class="stat-sublabel">characters</div>
                            </div>
                        </div>
                        <div class="mode-distribution">
                            <div class="stat-label">Mode Distribution</div>
                            <div class="mode-bars">
                                <div class="mode-bar-item">
                                    <div class="mode-label">Tutor Mode</div>
                                    <div class="mode-bar">
                                        <div class="mode-bar-fill tutor" id="tutor-bar" style="width: 0%"></div>
                                    </div>
                                    <div class="mode-count" id="tutor-count">0</div>
                                </div>
                                <div class="mode-bar-item">
                                    <div class="mode-label">Prot√©g√© Mode</div>
                                    <div class="mode-bar">
                                        <div class="mode-bar-fill protege" id="protege-bar" style="width: 0%"></div>
                                    </div>
                                    <div class="mode-count" id="protege-count">0</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Struggle Topics Section -->
                <section class="home-section struggle-topics-section" id="struggle-topics-section" style="display: none;">
                    <div class="section-header">
                        <h2>‚ö†Ô∏è Struggle Topics</h2>
                    </div>
                    <div class="struggle-topics-content" id="struggle-topics-content">
                        <!-- Struggle topics will be populated by JavaScript -->
                        <div class="loading-spinner">Loading...</div>
                    </div>
                    
                    <!-- Live Struggle Activity Table -->
                    <div class="live-struggle-table-container" id="live-struggle-container" style="display: none;">
                        <div class="table-header">
                            <h3>üìã Live Struggle Activity</h3>
                            <div class="table-controls">
                                <label class="filter-checkbox">
                                    <input type="checkbox" id="filter-active-only" />
                                    <span>Show only active</span>
                                </label>
                                <button class="action-btn secondary" id="download-csv-btn">
                                    Download CSV
                                </button>
                            </div>
                        </div>
                        <div class="table-scroll-container">
                            <table class="live-struggle-table">
                                <thead>
                                    <tr>
                                        <th>Time (PST)</th>
                                        <th>Name</th>
                                        <th>Topic</th>
                                        <th>State</th>
                                    </tr>
                                </thead>
                                <tbody id="live-struggle-tbody">
                                    <!-- Rows populated by JavaScript -->
                                    <tr class="no-data-row">
                                        <td colspan="4" style="text-align: center; color: #666; padding: 20px;">
                                            No struggle activity yet. Activity will appear here as students interact with topics.
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Flagged Content Section -->
                <section class="home-section flagged-section">
                    <div class="section-header">
                        <h2>Flagged Content</h2>
                    </div>
                    <div class="flagged-content">
                        <div class="flagged-info">
                            <p class="flagged-description">Review and respond to questions flagged by students</p>
                            <div class="flagged-stats">
                                <span class="flagged-count-label">Pending Flags:</span>
                                <span class="flagged-count" id="pending-flags-count">0</span>
                            </div>
                        </div>
                        <a href="/instructor/flagged" class="action-btn primary" id="view-flags-btn">
                            View Flagged Questions ‚Üí
                        </a>
                    </div>
                </section>

                <!-- Missing Items Alert Section -->
                <section class="home-section missing-items-section" id="missing-items-section" style="display: none;">
                    <div class="section-header">
                        <h2>‚ö†Ô∏è Missing Course Content</h2>
                    </div>
                    <div class="missing-items-content">
                        <p class="missing-items-description">
                            The following units are missing required content. Each unit must have at least one learning objective, one lecture note, and one practice question/tutorial.
                        </p>
                        <div class="missing-items-list" id="missing-items-list">
                            <!-- Missing items will be populated by JavaScript -->
                        </div>
                    </div>
                </section>

                <!-- All Complete Message -->
                <section class="home-section complete-section" id="complete-section" style="display: none;">
                    <div class="section-header">
                        <h2>‚úÖ All Units Complete</h2>
                    </div>
                    <div class="complete-content">
                        <p>All units have the required learning objectives, lecture notes, and practice questions.</p>
                    </div>
                </section>

                <!-- Disclaimer Card -->
                <section class="home-section disclaimer-section">
                    <div class="section-header">
                        <h2>Important Disclaimers</h2>
                    </div>
                    <div class="disclaimer-content">
                        <div class="disclaimer-item">
                            <strong>Copyright Permission:</strong>
                            <p>All course content must have proper permissions from the copyright holder before being uploaded to BiocBot. Instructors are responsible for ensuring they have the necessary rights to use all uploaded materials.</p>
                        </div>
                        <div class="disclaimer-item">
                            <strong>AI Processing:</strong>
                            <p>Uploaded course content will be processed and sent to AI services (including GPT) for embedding generation and question answering. By uploading content, you acknowledge that your materials will be processed by these AI systems.</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>
    
    <script src="../common/scripts/auth.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="../instructor/scripts/home.js"></script>
</body>
</html> 